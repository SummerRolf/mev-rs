#! /bin/bash

echo "> status check"
curl --write-out %{http_code} -s -X GET -H "Content-Type: application/json"  http://localhost:18550/eth/v1/builder/status
echo ""
echo "> validator registration"
curl --write-out %{http_code} -s -X POST -d '
{
   "message":{
      "fee_recipient":"0x0000000000000000000000000000000000000001",
      "gas_limit":"100",
      "timestamp":"1000",
      "pubkey":"0xc00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000"
   },
   "signature":"0xc00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000"
}' -H "Content-Type: application/json"  http://localhost:18550/eth/v1/builder/validators | jq .
echo ""
echo "> fetching bid"
curl --write-out %{http_code} -s -H "Content-Type: application/json" http://localhost:18550/eth/v1/builder/header/3752095/0x3030303030303030303030303030303030303030303030303030303030303030/0xc00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000 | jq .
echo ""
echo "> accepting bid"
curl --write-out %{http_code} -s -X POST -d '
{
   "message":{
      "slot":"3752095",
      "proposer_index":"0",
      "parent_root":"0x0000000000000000000000000000000000000000000000000000000000000000",
      "state_root":"0x0000000000000000000000000000000000000000000000000000000000000000",
      "body":{
         "randao_reveal":"0xc00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000",
         "eth1_data":{
            "deposit_root":"0x0000000000000000000000000000000000000000000000000000000000000000",
            "deposit_count":"0",
            "block_hash":"0x0000000000000000000000000000000000000000000000000000000000000000"
         },
         "graffiti":"0x0000000000000000000000000000000000000000000000000000000000000000",
         "proposer_slashings":[],
         "attester_slashings":[],
         "attestations":[],
         "deposits":[],
         "voluntary_exits":[],
         "sync_aggregate":{
            "sync_committee_bits":"00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000",
            "sync_committee_signature":"0xc00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000"
         },
         "execution_payload_header":{
            "parent_hash":"0x3030303030303030303030303030303030303030303030303030303030303030",
            "fee_recipient":"0x0000000000000000000000000000000000000000",
            "state_root":"0x0000000000000000000000000000000000000000000000000000000000000000",
            "receipts_root":"0x0000000000000000000000000000000000000000000000000000000000000000",
            "logs_bloom":"0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000",
            "prev_randao":"0x0000000000000000000000000000000000000000000000000000000000000000",
            "block_number":"0",
            "gas_limit":"0",
            "gas_used":"0",
            "timestamp":"0",
            "extra_data":"0x",
            "base_fee_per_gas":"0",
            "block_hash":"0x0000000000000000000000000000000000000000000000000000000000000000",
            "transactions_root":"0x0000000000000000000000000000000000000000000000000000000000000000"
         }
      }
   },
   "signature":"0xc00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000"
}' -H "Content-Type: application/json"  http://localhost:18550/eth/v1/builder/blinded_blocks | jq .


